<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Meta tags untuk karakter set, viewport, dan title -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GSPE Auto-Monitoring System</title>
    
    <!-- CDN untuk Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Konfigurasi kustom untuk Tailwind CSS -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#1e3a8a',
                        'primary-light': '#3b82f6',
                        success: '#28a745',
                        danger: '#dc3545',
                        warning: '#ffc107',
                        info: '#17a2b8',
                        light: '#f8f9fa',
                        dark: '#343a40',
                        border: '#e0e0e0',
                        'text-muted': '#666'
                    }
                }
            }
        }
    </script>
    
    <!-- CSS kustom -->
    <style>
        /* Import font Inter dari Google Fonts */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        /* Pengaturan font utama */
        body {
            font-family: 'Inter', sans-serif;
        }
        
        /* Styling untuk stream kamera */
        .camera-stream {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        /* Styling untuk dot status karyawan - hadir */
        .status-dot.available {
            background: #28a745;
        }
        
        /* Styling untuk dot status karyawan - tidak hadir */
        .status-dot.off {
            background: #dc3545;
        }
        
        /* Styling untuk indikator status AI - aktif */
        .ai-status .status-indicator.active {
            background: #28a745;
        }
        
        /* Styling untuk badge notifikasi */
        .notification-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: #dc3545;
            color: white;
            border-radius: 50%;
            width: 18px;
            height: 18px;
            font-size: 0.7rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
        }
        
        /* Styling untuk toast notification */
        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 12px 20px;
            border-radius: 6px;
            color: white;
            font-weight: 500;
            z-index: 10000;
            opacity: 0;
            transform: translateY(-20px);
            transition: all 0.3s ease;
            max-width: 300px;
            word-wrap: break-word;
        }
        
        .toast.toast-info {
            background-color: #17a2b8;
        }
        
        .toast.toast-success {
            background-color: #28a745;
        }
        
        .toast.toast-warning {
            background-color: #ffc107;
            color: #212529;
        }
        
        .toast.toast-error {
            background-color: #dc3545;
        }
        
        /* Animasi untuk modal */
        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .modal-content {
            animation: modalSlideIn 0.3s ease-out;
        }
        
        /* Animasi spinner loading */
        .spinner {
            border: 2px solid #f3f3f3;
            border-top: 2px solid #1e3a8a;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Animation for new employee card flash */
        @keyframes flash-green {
            0% { background-color: #e6fffa; border-color: #38a169; }
            50% { background-color: #e6fffa; border-color: #38a169; }
            100% { background-color: transparent; border-color: transparent; }
        }
        .flash-green {
            animation: flash-green 1.5s ease-out;
        }


        /* From Uiverse.io by namecho */
        .switch { --button-width: 3em; --button-height: 1.5em; --toggle-diameter: 1em; --button-toggle-offset: calc((var(--button-height) - var(--toggle-diameter)) / 2); --toggle-shadow-offset: 10px; --toggle-wider: 2em; --color-grey: #cccccc; --color-green: #11b63a; cursor: pointer; }
        .slider { display: inline-block; width: var(--button-width); height: var(--button-height); background-color: var(--color-grey); border-radius: calc(var(--button-height) / 2); position: relative; transition: 0.3s all ease-in-out; }
        .switch .slider { cursor: pointer; }
        .slider::after { content: ""; display: inline-block; width: var(--toggle-diameter); height: var(--toggle-diameter); background-color: #fff; border-radius: calc(var(--toggle-diameter) / 2); position: absolute; top: var(--button-toggle-offset); transform: translateX(var(--button-toggle-offset)); box-shadow: var(--toggle-shadow-offset) 0 calc(var(--toggle-shadow-offset) * 4) rgba(0, 0, 0, 0.1); transition: 0.3s all ease-in-out; }
        .switch input[type="checkbox"]:checked + .slider { background-color: var(--color-green); }
        .switch input[type="checkbox"]:checked + .slider::after { transform: translateX(calc(var(--button-width) - var(--toggle-diameter) - var(--button-toggle-offset))); box-shadow: calc(var(--toggle-shadow-offset) * -1) 0 calc(var(--toggle-shadow-offset) * 4) rgba(0, 0, 0, 0.1); }
        .switch input[type="checkbox"] { display: none; }
        .switch input[type="checkbox"]:active + .slider::after { width: var(--toggle-wider); }
        .switch input[type="checkbox"]:checked:active + .slider::after { transform: translateX(calc(var(--button-width) - var(--toggle-wider) - var(--button-toggle-offset))); }

        /* Refresh button icon spin on hover/focus */
        #btn-refresh-page:hover svg,
        #btn-refresh-page:focus svg { animation: spin 0.6s linear; }

        /* No animations - instant show/hide for better performance */
    </style>
</head>
<body class="bg-gray-100 text-gray-800 min-h-screen flex flex-col">
    <!-- Header -->
    <!-- Bagian header berisi logo, judul dashboard, dan tombol notifikasi -->
    <header class="bg-white py-4 px-8 flex justify-between items-center shadow-md border-b border-gray-200 sticky top-0 z-50">
        <!-- Logo dan nama sistem -->
        <div class="flex items-center">
            <div class="flex items-center gap-3">
                <img src="/assets/logo" alt="GSPE" class="h-10 w-auto object-contain select-none" draggable="false" />
                <div class="flex flex-col leading-tight"></div>
            </div>
        </div>
        
        <!-- Judul dashboard -->
        <div class="flex-1 text-center">
            <h1 class="text-2xl font-semibold text-primary">Welcome to Dashboard</h1>
            <span class="text-l font-medium text-gray-500">Auto-Monitoring System</span>
        </div>
        
        <!-- Elemen waktu dan tombol notifikasi -->
        <div class="flex items-center gap-4 relative">
            <!-- Menampilkan waktu dan tanggal saat ini -->
            <div class="text-right">
                <div class="text-lg font-semibold text-gray-800" id="current-time">15:23:00</div>
                <div class="text-sm text-gray-500" id="current-date">20 August 2025</div>
            </div>
            <!-- Tombol notifikasi - menampilkan jumlah notifikasi baru -->
            <button class="bg-gray-100 border border-gray-200 rounded-lg p-2 hover:bg-gray-200 transition relative" id="notification-btn" aria-haspopup="true" aria-expanded="false">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
                    <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
                </svg>
                <span id="notification-badge" class="hidden absolute -top-1 -right-1 text-xs font-semibold bg-red-500 text-white rounded-full px-1.5 py-0.5 leading-none">0</span>
            </button>
            <!-- Notification Dropdown -->
            <div id="notification-dropdown" class="hidden absolute right-0 top-12 w-80 bg-white shadow-lg border border-gray-200 rounded-lg overflow-hidden z-30">
                <div class="px-3 py-2 border-b border-gray-100 flex items-center justify-between">
                    <div class="font-semibold text-gray-700">Notifications</div>
                    <button id="btn-clear-notifs" class="text-xs px-2 py-0.5 border border-gray-200 rounded hover:bg-gray-50" title="Clear all notifications">Clear All</button>
                </div>
                <div id="notification-list" class="max-h-64 overflow-y-auto">
                    <div class="px-4 py-3 text-sm text-gray-500">No notifications</div>
                </div>
            </div>
            <!-- Tombol pengaturan - untuk configurasi mengenai sistem -->
            <button class="bg-gray-100 border border-gray-200 rounded-lg p-2 hover:bg-gray-200 transition" id="settings-btn">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="3"></circle>
                    <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1 1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
                </svg>
            </button>
        </div>
    </header>

    <!-- Main Content -->
    <div class="flex flex-1 min-h-[calc(100vh-140px)]">
        <!-- Sidebar -->
        <!-- Menu navigasi samping untuk berpindah antar halaman -->
        <aside class="w-48 bg-primary sticky top-[72px] max-h-[calc(100vh-72px)] overflow-y-auto">
            <nav class="flex flex-col">
                <!-- Tombol menu CCTV - halaman aktif -->
                <a href="#" class="flex items-center gap-3 px-6 py-4 text-gray-300 hover:bg-blue-800 hover:text-white transition border-b border-blue-900 active" data-page="cctv">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-video-icon lucide-video"><path d="m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5"/><rect x="2" y="6" width="14" height="12" rx="2"/></svg>
                    <span>CCTV</span>
                </a>
                <!-- Tombol menu Report -->
                <a href="#" class="flex items-center gap-3 px-6 py-4 text-gray-300 hover:bg-blue-800 hover:text-white transition border-b border-blue-900" data-page="report">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                        <polyline points="14,2 14,8 20,8"></polyline>
                        <line x1="16" y1="13" x2="8" y2="13"></line>
                        <line x1="16" y1="17" x2="8" y2="17"></line>
                        <polyline points="10,9 9,9 8,9"></polyline>
                    </svg>
                    <span>Report</span>
                </a>
            </nav>
        </aside>

        <!-- Content Area -->
        <main class="flex-1 p-8">
            <!-- CCTV Page -->
            <!-- Halaman utama yang menampilkan feed CCTV dan tracking karyawan -->
            <div id="cctv-page" class="page block">
                <!-- System Information Panel (moved here) -->
                <div id="system-info" class="mb-4">
                    <div class="bg-white border border-gray-200 shadow rounded-xl px-4 py-2 flex items-center gap-4 text-xs">
                        <div class="text-sm font-semibold text-primary flex-1">System Information</div>
                        <!-- Schedule status badge -->
                        <div class="flex items-center gap-2" id="sys-mode">
                            <span id="sys-mode-icon" class="inline-flex text-gray-400">
                                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
                            </span>
                            <span id="sys-mode-text" class="text-gray-600">—</span>
                        </div>
                        <div class="hidden sm:block h-5 w-px bg-gray-300"></div>
                        <div class="flex items-center gap-2" id="sys-net">
                            <span class="inline-flex items-center">
                                <svg id="sys-wifi-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-wifi-icon lucide-wifi text-gray-400"><path d="M12 20h.01"/><path d="M2 8.82a15 15 0 0 1 20 0"/><path d="M5 12.859a10 10 0 0 1 14 0"/><path d="M8.5 16.429a5 5 0 0 1 7 0"/></svg>
                            </span>
                            <span id="sys-latency" class="text-gray-400">—</span>
                        </div>
                        <div class="hidden sm:block h-5 w-px bg-gray-300"></div>
                        <!-- Cameras Online badge -->
                        <div class="flex items-center gap-2" id="sys-cam">
                            <span class="inline-flex items-center text-gray-500">
                                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="7" width="15" height="10" rx="2"/><path d="M22 11l-5-3v8l5-3z"/></svg>
                            </span>
                            <span id="sys-cam-online" class="text-gray-700">Cams Online: —</span>
                        </div>
                        <div class="hidden sm:block h-5 w-px bg-gray-300"></div>
                        <div class="flex items-center gap-2" id="sys-gpu">
                            <span class="text-gray-500">GPU Usage:</span>
                            <span id="sys-gpu-val" class="text-gray-700">—</span>
                        </div>
                        <div class="hidden sm:block h-5 w-px bg-gray-300"></div>
                        <div class="flex items-center gap-2" id="sys-mem">
                            <span class="text-gray-500">Memory Usage:</span>
                            <span id="sys-mem-val" class="text-gray-700">—</span>
                        </div>
                        <div class="hidden sm:block h-5 w-px bg-gray-300"></div>
                        <button id="btn-refresh-page" type="button" class="inline-flex items-center px-3 py-1 bg-gray-300 text-gray-700 rounded-xl hover:bg-primary hover:text-white focus:outline-none">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" class="w-4 h-4 mr-2" fill="currentColor" aria-hidden="true">
                                <path d="M11.534 7h3.932a.25.25 0 0 1 .192.41l-1.966 2.36a.25.25 0 0 1-.384 0l-1.966-2.36a.25.25 0 0 1 .192-.41zm-11 2h3.932a.25.25 0 0 0 .192-.41L2.692 6.23a.25.25 0 0 0-.384 0L.342 8.59A.25.25 0 0 0 .534 9z"></path>
                                <path fill-rule="evenodd" d="M8 3c-1.552 0-2.94.707-3.857 1.818a.5.5 0 1 1-.771-.636A6.002 6.002 0 0 1 13.917 7H12.9A5.002 5.002 0 0 0 8 3zM3.1 9a5.002 5.002 0 0 0 8.757 2.182.5.5 0 1 1 .771.636A6.002 6.002 0 0 1 2.083 9H3.1z"></path>
                            </svg>
                            <span>Refresh</span>
                        </button>
                    </div>
                </div>

                <!-- Adjustment Panel (global controls) -->
                <div id="adjustment-bar" class="mb-4 bg-white border border-gray-200 shadow rounded-xl px-4 py-2 flex items-center gap-3">
                    <div class="text-sm font-semibold text-primary flex-1">Adjustment Panel</div>
                    <div class="flex items-center gap-2">
                        <!-- CCTV Toggle with Eye Icon -->
                        <button id="btn-adj-toggle-feed"
                                class="flex items-center gap-1.5 text-xs px-3 py-1.5 bg-white border border-gray-300 rounded-full hover:bg-gray-50 transition-all"
                                title="Toggle CCTV Panel">
                            <svg id="icon-feed" class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                                <circle cx="12" cy="12" r="3"></circle>
                            </svg>
                            <span id="text-feed">CCTV</span>
                        </button>

                        <!-- Capture Panel Toggle Button -->
                        <button id="btn-adj-toggle-cap" class="flex items-center gap-1.5 text-xs px-3 py-1.5 bg-white border border-gray-300 rounded-full hover:bg-gray-50 transition-all" title="Toggle Capture Panel">
                            <svg id="icon-cap" class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                                <circle cx="12" cy="12" r="3"></circle>
                            </svg>
                            <span>Capture</span>
                        </button>

                        <!-- Employee Layout Toggle (single button with dynamic icon) -->
                        <button id="btn-adj-toggle-emp"
                                class="flex items-center gap-1.5 text-xs px-3 py-1.5 bg-white border border-gray-300 rounded-full hover:bg-gray-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed"
                                title="Toggle Employee Panel Layout"
                                disabled>
                            <svg id="icon-emp" class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <!-- Maximize icon (default) -->
                                <path id="icon-emp-maximize" d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"></path>
                                <!-- Minimize icon (hidden by default) -->
                                <path id="icon-emp-minimize" class="hidden" d="M8 3v3a2 2 0 0 1-2 2H3m18 0h-3a2 2 0 0 1-2-2V3m0 18v-3a2 2 0 0 1 2-2h3M3 16h3a2 2 0 0 1 2 2v3"></path>
                            </svg>
                            <span id="text-emp">Employee</span>
                        </button>
                    </div>
                </div>
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 h-full items-start">
                    <!-- Live CCTV Feed -->
                    <!-- Panel kiri menampilkan live feed dari kamera CCTV -->
                    <section id="cctv-feed" class="lg:col-span-2 bg-white rounded-xl p-6 shadow transition-all h-fit">
                        <!-- Header panel CCTV dengan status AI -->
                        <div class="flex justify-between items-center mb-6">
                            <h2 class="text-xl font-semibold text-primary">Live CCTV Feed</h2>
                            <!-- Status indikator AI inference -->
                            <div class="flex items-center gap-3">
                                <div class="w-2.5 h-2.5 rounded-full bg-red-500" id="ai-status-indicator"></div>
                                <span id="ai-status-text">AI Inference: Offline</span>
                            </div>
                        </div>
                        <!-- Area tampilan video CCTV -->
                        <div id="video-container" class="bg-gray-100 border-2 border-gray-200 rounded-lg h-96 flex items-center justify-center mb-6 relative overflow-hidden">
                            <img id="video-stream" class="camera-stream hidden" alt="Live Stream" />
                            <div class="text-xl text-gray-500 font-medium" id="video-placeholder">
                                <span>&lt;LIVE CCTV CAM&gt;</span>
                            </div>
                        </div>
                        
                        <!-- CCTV Camera Controls -->
                        <!-- Kontrol untuk memilih kamera CCTV yang berbeda -->
                        <div>
                            <h3 id="camera-title" class="text-lg font-medium text-primary mb-4">CCTV CAM</h3>
                            <div class="overflow-x-auto pb-2">
                                <div class="flex gap-3" id="camera-buttons">
                                    <!-- Tombol kamera akan diisi oleh JavaScript -->
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Employee Tracking -->
                    <!-- Panel kanan menampilkan tracking karyawan -->
                    <section id="employee-tracking" class="bg-white rounded-xl p-6 shadow flex flex-col transition-all h-fit">
                        <!-- Header panel tracking dengan jumlah karyawan aktif -->
                        <div class="flex justify-between items-center mb-3">
                            <h2 class="text-xl font-semibold text-primary">Employee Tracking</h2>
                            <div class="bg-gray-100 px-3 py-1 rounded-full text-sm text-gray-500 border border-gray-200" id="active-count">0 Active</div>
                        </div>
                        <!-- Area filter placed below the title -->
                        <div class="mb-4 flex items-center gap-2">
                            <select id="area-filter" class="text-sm border border-gray-300 rounded px-2 py-1 min-w-[180px]">
                                <option value="">All Areas</option>
                            </select>
                        </div>
                        <!-- Daftar karyawan yang terdeteksi -->
                        <div class="flex-1 mb-6 overflow-y-auto max-h-[500px]" id="employee-list">
                            <!-- Item karyawan akan diisi oleh JavaScript -->
                        </div>
                        
                        <!-- Summary Stats -->
                        <!-- Statistik ringkasan kehadiran karyawan -->
                        <div class="flex justify-around pt-6 border-t border-gray-200" id="summary-stats">
                            <div class="text-center">
                                <div class="text-3xl font-bold text-gray-500" id="present-count">0</div>
                                <div class="text-sm text-gray-500 mt-1">Present</div>
                            </div>
                            <div class="text-center">
                                <div class="text-3xl font-bold text-danger" id="alert-count">0</div>
                                <div class="text-sm text-gray-500 mt-1">Alerts</div>
                            </div>
                            <div class="text-center">
                                <div class="text-3xl font-bold text-gray-500" id="total-count">0</div>
                                <div class="text-sm text-gray-500 mt-1">Total</div>
                            </div>
                        </div>
                    </section>

                    <!-- Frame Capture Panel (auto per-camera preview) -->
                    <section id="frame-capture" class="lg:col-span-2 bg-white rounded-xl p-6 shadow transition-all">
                        <div class="flex items-center justify-between mb-3">
                            <h3 class="text-xl font-semibold text-primary">Frame Capture</h3>
                            <div class="text-xs text-gray-500" id="capture-hint">Click a card below to preview the latest frame</div>
                        </div>
                        <!-- Preview on Top -->
                        <div class="bg-gray-50 border-2 border-gray-200 rounded-lg h-80 mb-4 flex items-center justify-center overflow-hidden">
                            <img id="cap-view" class="hidden max-h-full object-contain" alt="Captured Preview" />
                            <div id="cap-view-ph" class="text-gray-400">No preview selected</div>
                        </div>
                        <!-- Capture Preview grid (auto, per active camera) -->
                        <div class="lg:col-span-2">
                            <div>
                                <div class="text-sm font-medium mb-2">Capture Preview</div>
                                <div id="capture-list" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-2"></div>
                            </div>
                        </div>
                    </section>

                    
                </div>
            </div>

            <!-- Report Page -->
            <!-- Halaman laporan kehadiran karyawan -->
            <div id="report-page" class="page hidden">
                <div class="bg-white rounded-xl p-8 shadow">
                    <h2 class="text-2xl font-semibold text-primary mb-6">Attendance Report</h2>
                    <div class="report-content">
                        <!-- Filters -->
                        <div class="grid grid-cols-1 md:grid-cols-5 gap-3 mb-4 items-end">
                            <div>
                                <label class="block text-xs text-gray-600 mb-1">From</label>
                                <input id="rep-from" type="date" class="w-full border rounded px-2 py-1" />
                            </div>
                            <div>
                                <label class="block text-xs text-gray-600 mb-1">To</label>
                                <input id="rep-to" type="date" class="w-full border rounded px-2 py-1" />
                            </div>
                            <div class="md:col-span-2">
                                <label class="block text-xs text-gray-600 mb-1">Employee</label>
                                <select id="rep-emp" class="w-full border rounded px-2 py-1">
                                    <option value="">All Employees</option>
                                </select>
                            </div>
                            <!-- Buttons removed: realtime loading and bottom export -->
                        </div>

                        <!-- Attendance Table -->
                        <div class="overflow-x-auto mb-8" style="margin-bottom: 0px;">
                            <table class="min-w-full text-sm border border-gray-200 rounded">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="px-3 py-2 text-left cursor-pointer select-none" data-sort-key="employee_code">Employee Code</th>
                                        <th class="px-3 py-2 text-left cursor-pointer select-none" data-sort-key="employee_name">Name</th>
                                        <th class="px-3 py-2 text-left cursor-pointer select-none" data-sort-key="date">Date</th>
                                        <th class="px-3 py-2 text-left cursor-pointer select-none" data-sort-key="first_in_ts">First In</th>
                                        <th class="px-3 py-2 text-left cursor-pointer select-none" data-sort-key="last_out_ts">Last Out</th>
                                        <th class="px-3 py-2 text-left cursor-pointer select-none" data-sort-key="status">Status</th>
                                        <th class="px-3 py-2 text-left cursor-pointer select-none" data-sort-key="violation_count">Violation</th>
                                        <th class="px-3 py-2 text-left">Preview</th>
                                    </tr>
                                </thead>
                                <tbody id="att-table" class="divide-y"></tbody>
                            </table>
                        </div>

                        <!-- Alerts Header + Export -->
                        <div class="flex items-center mb-2" style="margin-top: 15px;">
                            <h3 class="text-lg font-semibold text-primary">Alert Logs</h3>
                        </div>
                        <!-- Alert Logs Table -->
                        <div class="overflow-x-auto">
                            <table class="min-w-full text-sm border border-gray-200 rounded">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="px-3 py-2 text-left cursor-pointer select-none" data-sort-key="timestamp">Timestamp</th>
                                        <th class="px-3 py-2 text-left cursor-pointer select-none" data-sort-key="employee_code">Employee Code</th>
                                        <th class="px-3 py-2 text-left cursor-pointer select-none" data-sort-key="employee_name">Name</th>
                                        <th class="px-3 py-2 text-left cursor-pointer select-none" data-sort-key="alert_type">Type</th>
                                        <th class="px-3 py-2 text-left cursor-pointer select-none" data-sort-key="message">Message</th>
                                    </tr>
                                </thead>
                                <tbody id="alerts-table" class="divide-y"></tbody>
                            </table>
                        </div>

                        <!-- Attendance Preview Modal -->
                        <div id="att-preview-modal" class="fixed inset-0 bg-black/40 flex items-center justify-center z-50 hidden">
                            <div class="bg-white rounded w-[720px] max-w-[95vw]">
                                <div class="px-4 py-3 border-b text-sm font-medium flex items-center justify-between">
                                    <div id="att-preview-title">Attendance Preview</div>
                                    <button id="att-preview-close" class="px-2 py-1 text-sm border rounded">Close</button>
                                </div>
                                <div class="p-4 grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div class="border rounded p-2">
                                        <div class="text-xs text-gray-500 mb-1">First In <span id="att-first-time" class="text-gray-700"></span></div>
                                        <div id="att-first-meta" class="text-[11px] text-gray-600 mb-2"></div>
                                        <div class="bg-gray-50 border rounded h-56 flex items-center justify-center overflow-hidden">
                                            <img id="att-first-img" class="max-h-full object-contain hidden" alt="First In" />
                                            <div id="att-first-ph" class="text-gray-400 text-sm">No image</div>
                                        </div>
                                    </div>
                                    <div class="border rounded p-2">
                                        <div class="text-xs text-gray-500 mb-1">Last Out <span id="att-last-time" class="text-gray-700"></span></div>
                                        <div id="att-last-meta" class="text-[11px] text-gray-600 mb-2"></div>
                                        <div class="bg-gray-50 border rounded h-56 flex items-center justify-center overflow-hidden">
                                            <img id="att-last-img" class="max-h-full object-contain hidden" alt="Last Out" />
                                            <div id="att-last-ph" class="text-gray-400 text-sm">No image</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Reset Logs Toolbar (Events & Alert Logs) -->
                        <div class="flex items-center gap-3 mt-6">
                            <button id="btn-reset-logs" class="px-3 py-1.5 text-sm bg-red-600 text-white rounded">Reset Logs</button>
                            <span class="text-xs text-gray-500">Delete data in the Events and/or Alert Logs tables based on the date range.</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Settings Page -->
            <div id="settings-page" class="page hidden">
                <div class="bg-white rounded-xl p-6 shadow">
                    <div class="flex justify-between items-center mb-4">
                        <h2 class="text-2xl font-semibold text-primary">Settings</h2>
                    </div>

                    <!-- Tabs -->
                    <div class="border-b border-gray-200 mb-4">
                        <nav class="flex gap-4" aria-label="Tabs">
                            <button id="tab-manage-employee" class="px-4 py-2 text-gray-500 hover:text-gray-700">Manage Employee</button>
                            <button id="tab-manage-camera" class="px-4 py-2 text-gray-500 hover:text-gray-700">Manage Camera</button>
                            <button id="tab-manage-system" class="px-4 py-2 text-gray-500 hover:text-gray-700">Manage System</button>
                            <button id="tab-schedule-system" class="px-4 py-2 text-gray-500 hover:text-gray-700">Schedule System</button>
                        </nav>
                    </div>

                    <!-- Manage Employee Content -->
                    <section id="manage-employee" class="block">
                        <div class="flex justify-between items-center mb-3">
                            <h3 class="text-lg font-semibold text-primary">Employees</h3>
                            <div class="flex items-center gap-2">
                                <button id="btn-add-emp" class="px-3 py-1.5 text-sm bg-primary text-white rounded">Add Employee</button>
                                <button id="btn-refresh-emp" class="px-3 py-1.5 text-sm bg-gray-100 border border-gray-200 rounded">Refresh</button>
                            </div>
                        </div>
                        <div class="overflow-x-auto">
                            <table class="min-w-full text-sm border border-gray-200 rounded">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="px-3 py-2 text-left cursor-pointer select-none" data-sort-key="id">ID</th>
                                        <th class="px-3 py-2 text-left cursor-pointer select-none" data-sort-key="employee_code">Code</th>
                                        <th class="px-3 py-2 text-left cursor-pointer select-none" data-sort-key="name">Name</th>
                                        <th class="px-3 py-2 text-left cursor-pointer select-none" data-sort-key="department">Dept</th>
                                        <th class="px-3 py-2 text-left cursor-pointer select-none" data-sort-key="position">Position</th>
                                        <th class="px-3 py-2 text-left cursor-pointer select-none" data-sort-key="phone_number">Phone</th>
                                        <th class="px-3 py-2 text-left cursor-pointer select-none" data-sort-key="is_active">Active</th>
                                        <th class="px-3 py-2 text-left">Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="employee-table" class="divide-y"></tbody>
                            </table>
                        </div>
                    </section>

                    <!-- Manage Camera Content -->
                    <section id="manage-camera" class="hidden">
                        <div class="flex justify-between items-center mb-3">
                            <h3 class="text-lg font-semibold text-primary">Cameras</h3>
                            <button id="btn-refresh-cam" class="px-3 py-1.5 text-sm bg-primary text-white rounded">Refresh</button>
                        </div>

                        <!-- Add Camera Form -->
                        <div class="mb-4 p-3 border rounded bg-gray-50">
                            <div class="text-sm font-medium mb-2">Add Camera</div>
                            <div class="grid grid-cols-1 md:grid-cols-4 gap-2 items-end">
                                <div>
                                    <label class="block text-xs text-gray-600 mb-1">Name</label>
                                    <input id="cam-add-name" type="text" class="w-full border rounded px-2 py-1" placeholder="e.g. Cam 1, Cam 2" />
                                </div>
                                <div class="md:col-span-2">
                                    <label class="block text-xs text-gray-600 mb-1">RTSP / Source</label>
                                    <input id="cam-add-url" type="text" class="w-full border rounded px-2 py-1" placeholder="rtsp://... or webcam:0 or 0" />
                                </div>
                                <div>
                                    <label class="block text-xs text-gray-600 mb-1">Area</label>
                                    <input id="cam-add-area" type="text" class="w-full border rounded px-2 py-1" placeholder="e.g. Lobby, Warehouse" />
                                </div>
                                <div>
                                    <label class="block text-xs text-gray-600 mb-1">ID (optional)</label>
                                    <input id="cam-add-id" type="number" min="1" class="w-full border rounded px-2 py-1" placeholder="auto" />
                                </div>
                                <div class="md:col-span-4 flex gap-2 mt-2">
                                    <button id="btn-add-camera" class="px-3 py-1.5 text-sm bg-green-600 text-white rounded">Add Camera</button>
                                    <div id="cam-add-msg" class="text-sm"></div>
                                </div>
                            </div>
                            <div class="text-xs text-gray-500 mt-2">Note: Camera must be enabled via Manage Camera toggle to appear online in CCTV streaming.</div>
                        </div>

                        <div id="camera-status-list" class="grid grid-cols-1 md:grid-cols-2 gap-3"></div>
                    </section>
                    
                    <!-- Manage System Content -->
                    <section id="manage-system" class="hidden">
                        <div class="flex justify-between items-center mb-3">
                            <h3 class="text-lg font-semibold text-primary">System</h3>
                        </div>
                        <div class="p-3 border rounded bg-gray-50 space-y-3">
                            <div>
                                <p class="text-sm text-gray-600 mb-2">Restart the application without using the terminal.</p>
                                <button id="btn-reset-system" class="px-3 py-1.5 text-sm bg-red-600 text-white rounded">Restart System</button>
                                <span id="sys-reset-msg" class="text-sm ml-2"></span>
                            </div>
                            <div class="pt-3 border-t border-gray-200">
                                <p class="text-sm text-gray-600 mb-2">Shutdown the application and all background workers.</p>
                                <button id="btn-shutdown-system" class="px-3 py-1.5 text-sm bg-gray-800 text-white rounded">Shutdown System</button>
                                <span id="sys-shutdown-msg" class="text-sm ml-2"></span>
                            </div>
                        </div>
                    </section>
                    
                    <!-- Schedule System Content (under Settings tab) -->
                    <section id="schedule-system" class="hidden">
                        <div class="flex justify-between items-center mb-3">
                            <h3 class="text-lg font-semibold text-primary">Schedule System</h3>
                            <div id="schedule-current-time" class="text-sm text-gray-600 font-mono"></div>
                        </div>
                        <div id="schedule-banner" class="mb-3 p-3 rounded border text-sm"></div>
                        <div class="p-3 border rounded bg-gray-50 space-y-3">
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
                                <div class="flex items-center gap-3 text-sm">
                                    <label class="switch">
                                        <input id="sch-auto" type="checkbox" />
                                        <span class="slider"></span>
                                    </label>
                                    <span>Follow Auto Schedule</span>
                                </div>
                                <div>
                                    <label class="block text-xs text-gray-600 mb-1">Work Hours <span class="text-primary font-semibold">(WIB)</span></label>
                                    <input id="sch-work" type="text" class="w-full border rounded px-2 py-1" placeholder="08:30-17:30" />
                                </div>
                                <div>
                                    <label class="block text-xs text-gray-600 mb-1">Lunch Break <span class="text-primary font-semibold">(WIB)</span></label>
                                    <input id="sch-lunch" type="text" class="w-full border rounded px-2 py-1" placeholder="12:00-13:00" />
                                </div>
                            </div>
                            <div class="flex gap-2">
                                <button id="btn-sch-save" class="px-3 py-1.5 text-sm bg-primary text-white rounded">Save Schedule</button>
                                <button id="btn-sch-resume" class="px-3 py-1.5 text-sm bg-green-600 text-white rounded">Resume Now</button>
                                <button id="btn-sch-pause-lunch" class="px-3 py-1.5 text-sm bg-yellow-600 text-white rounded">Pause for Lunch</button>
                                <button id="btn-sch-pause-offhours" class="px-3 py-1.5 text-sm bg-gray-700 text-white rounded">Pause Until Next Work</button>
                            </div>
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-3 items-end">
                                <div>
                                    <label class="block text-xs text-gray-600 mb-1">Pause (minutes)</label>
                                    <input id="sch-pause-min" type="number" min="1" class="w-full border rounded px-2 py-1" placeholder="60" />
                                </div>
                                <div class="md:col-span-2 flex gap-2">
                                    <button id="btn-sch-pause-min" class="px-3 py-1.5 text-sm bg-gray-500 text-white rounded">Pause by Minutes</button>
                                </div>
                            </div>
                            <div id="sch-msg" class="text-sm"></div>
                        </div>
                    </section>
                </div>
            </div>
    </main>
    </div>

    <!-- Footer -->
    <!-- Footer dengan informasi hak cipta -->
    <footer class="bg-white py-4 text-center border-t border-gray-200 text-gray-500 text-sm">
        <p>Copyright @ PT GSPE</p>
    </footer>

    <!-- Notification Modal (not used by dropdown; kept for future use) -->
    <!-- Modal popup untuk menampilkan notifikasi -->
    <div id="notification-modal" class="hidden fixed inset-0 z-[900] bg-black bg-opacity-50">
        <div class="container mx-auto px-4 py-4">
        <div class="bg-white mx-auto mt-20 rounded-xl w-11/12 max-w-2xl shadow-2xl modal-content">
            <div class="flex justify-between items-center p-6 border-b border-gray-200 bg-gray-50 rounded-t-xl">
                <h3 class="text-xl font-semibold text-primary">Notifications</h3>
                <!-- Tombol tutup modal notifikasi -->
                <button class="text-2xl text-gray-500 hover:text-gray-700 transition" id="close-notification-modal">&times;</button>
            </div>
            <div class="p-6 max-h-96 overflow-y-auto" id="notification-modal-list">
                <!-- Daftar notifikasi akan diisi oleh JavaScript -->
            </div>
        </div>
    </div>

    <!-- Edit Employee Modal -->
    <div id="edit-employee-modal" class="hidden fixed inset-0 z-[1000] bg-black bg-opacity-50 flex items-center justify-center p-4" style="z-index:1000;">
        <div class="bg-white rounded-xl w-11/12 max-w-5xl shadow-2xl modal-content p-5 max-h-[90vh] overflow-y-auto">
            <div class="flex justify-between items-center mb-3">
                <h3 class="text-xl font-semibold text-primary">Edit Employee</h3>
                <button id="close-edit-employee" class="text-2xl text-gray-500">&times;</button>
            </div>
            <div class="grid md:grid-cols-2 gap-6">
                <!-- Left: Form -->
                <div>
                    <form id="edit-employee-form" class="space-y-3">
                        <input type="hidden" id="edit-id" />
                        <div>
                            <label class="block text-sm">Employee Code</label>
                            <input id="edit-code" class="w-full border rounded px-3 py-2 text-sm" />
                        </div>
                        <div>
                            <label class="block text-sm">Name</label>
                            <input id="edit-name" class="w-full border rounded px-3 py-2 text-sm" />
                        </div>
                        <div class="grid grid-cols-2 gap-3">
                            <div>
                                <label class="block text-sm">Department</label>
                                <input id="edit-dept" class="w-full border rounded px-3 py-2 text-sm" />
                            </div>
                            <div>
                                <label class="block text-sm">Position</label>
                                <input id="edit-pos" class="w-full border rounded px-3 py-2 text-sm" />
                            </div>
                        </div>
                        <div>
                            <label class="block text-sm">Phone</label>
                            <input id="edit-phone" class="w-full border rounded px-3 py-2 text-sm" />
                        </div>
                        <div class="flex items-center gap-3 text-sm">
                            <input type="checkbox" id="edit-active" class="h-4 w-4" checked />
                            <label for="edit-active">Active</label>
                        </div>
                        <div class="flex justify-end gap-2 pt-2">
                            <button type="button" id="save-edit-employee" class="px-4 py-2 bg-primary text-white rounded">Save</button>
                        </div>
                    </form>
                </div>
                <!-- Right: Face Templates + Update Face Templates -->
                <div>
                    <!-- Face Templates Preview (read-only) -->
                    <div class="pt-1">
                        <div class="flex items-center justify-between mb-2">
                            <label class="text-sm font-medium">Face Templates</label>
                            <span class="text-xs text-gray-500">read-only</span>
                        </div>
                        <div id="edit-face-templates" class="space-y-2 max-h-48 overflow-y-auto border border-gray-200 rounded p-2 bg-gray-50">
                            <div class="text-sm text-gray-500">No templates</div>
                        </div>
                    </div>
                    <!-- Edit: Face Capture (optional) -->
                    <div class="mt-4 pt-3 border-t">
                        <div class="flex items-center justify-between mb-2">
                            <label class="text-sm font-medium">Update Face Templates</label>
                            <span id="edit-face-status" class="text-xs text-gray-500"></span>
                        </div>
                        <!-- Mode Switcher -->
                        <div class="flex items-center gap-2 mb-2">
                            <span class="text-xs text-gray-600">Mode:</span>
                            <button type="button" id="btn-edit-usecam" class="px-2 py-1 text-xs rounded border bg-white">Camera</button>
                            <button type="button" id="btn-edit-usefile" class="px-2 py-1 text-xs rounded border">JPG</button>
                        </div>
                        <!-- Camera Pane -->
                        <div id="pane-edit-camera" class="">
                            <div class="relative aspect-video bg-black rounded overflow-hidden mb-2">
                                <video id="edit-video" class="w-full h-full object-cover" autoplay muted playsinline></video>
                                <canvas id="edit-canvas" class="hidden"></canvas>
                            </div>
                            <div class="flex items-center gap-2">
                                <button type="button" id="btn-edit-startcam" class="px-3 py-1.5 text-sm bg-gray-100 border border-gray-200 rounded">Start Camera</button>
                                <button type="button" id="btn-edit-capture" class="px-3 py-1.5 text-sm bg-primary text-white rounded">Capture</button>
                                <button type="button" id="btn-edit-retake" class="px-3 py-1.5 text-sm bg-gray-100 border border-gray-200 rounded hidden">Retake</button>
                                <img id="edit-snapshot" class="h-10 w-10 rounded hidden border border-gray-200" alt="snapshot" />
                            </div>
                        </div>
                        <!-- File Pane -->
                        <div id="pane-edit-file" class="hidden">
                            <div class="flex items-center gap-3 mb-2">
                                <input type="file" id="edit-file" accept="image/*" class="text-sm" />
                                <button type="button" id="btn-edit-applyfile" class="px-3 py-1.5 text-xs bg-primary text-white rounded">Use This Image</button>
                            </div>
                            <div class="flex items-center gap-2">
                                <img id="edit-file-preview" class="h-20 w-20 object-cover rounded border border-gray-200 hidden" alt="preview" />
                                <span class="text-xs text-gray-500">Select a JPG/PNG; then click "Use This Image" to assign to current pose.</span>
                            </div>
                        </div>
                        <!-- Pose selector and thumbnails -->
                        <div class="mt-3">
                            <div class="flex items-center gap-2 mb-2">
                                <span class="text-xs text-gray-600">Pose:</span>
                                <button type="button" class="pose-btn-edit px-2 py-0.5 text-xs rounded border" data-pose="front">Front</button>
                                <button type="button" class="pose-btn-edit px-2 py-0.5 text-xs rounded border" data-pose="left">Left</button>
                                <button type="button" class="pose-btn-edit px-2 py-0.5 text-xs rounded border" data-pose="right">Right</button>
                                <span id="pose-active-edit" class="ml-2 text-xs text-primary"></span>
                            </div>
                            <div id="pose-thumbs-edit" class="grid grid-cols-3 gap-2">
                                <div class="border rounded p-1 text-center">
                                    <div class="text-[10px] text-gray-500">Front</div>
                                    <img id="thumb-front-edit" class="w-full h-16 object-cover rounded hidden" />
                                    <div id="q-front-edit" class="text-[10px] text-gray-500 mt-1"></div>
                                </div>
                                <div class="border rounded p-1 text-center">
                                    <div class="text-[10px] text-gray-500">Left</div>
                                    <img id="thumb-left-edit" class="w-full h-16 object-cover rounded hidden" />
                                    <div id="q-left-edit" class="text-[10px] text-gray-500 mt-1"></div>
                                </div>
                                <div class="border rounded p-1 text-center">
                                    <div class="text-[10px] text-gray-500">Right</div>
                                    <img id="thumb-right-edit" class="w-full h-16 object-cover rounded hidden" />
                                    <div id="q-right-edit" class="text-[10px] text-gray-500 mt-1"></div>
                                </div>
                            </div>
                            <div class="text-[10px] text-gray-500 mt-1">Tip: capture all three poses for better recognition.</div>
                        </div>
                        <div class="flex items-center gap-2 mt-3">
                            <button type="button" id="btn-edit-register-faces" class="px-3 py-1.5 text-sm bg-green-600 text-white rounded">Register Faces</button>
                            <button type="button" id="btn-edit-clear-templates" class="px-3 py-1.5 text-sm bg-red-600 text-white rounded">Clear Templates</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Employee Modal -->
    <div id="add-employee-modal" class="hidden fixed inset-0 z-[1000] bg-black bg-opacity-50 flex items-center justify-center p-4" style="z-index:1000;">
        <div class="bg-white rounded-xl w-11/12 max-w-lg shadow-2xl modal-content p-5 max-h-[90vh] overflow-y-auto">
            <div class="flex justify-between items-center mb-3">
                <h3 class="text-xl font-semibold text-primary">Add Employee</h3>
                <button id="close-add-employee" class="text-2xl text-gray-500">&times;</button>
            </div>
            <form id="add-employee-form" class="space-y-3">
                <div>
                    <label class="block text-sm">Employee Code</label>
                    <input id="add-code" class="w-full border rounded px-3 py-2 text-sm" required />
                </div>
                <div>
                    <label class="block text-sm">Name</label>
                    <input id="add-name" class="w-full border rounded px-3 py-2 text-sm" required />
                </div>
                <div class="grid grid-cols-2 gap-3">
                    <div>
                        <label class="block text-sm">Department</label>
                        <input id="add-dept" class="w-full border rounded px-3 py-2 text-sm" />
                    </div>
                    <div>
                        <label class="block text-sm">Position</label>
                        <input id="add-pos" class="w-full border rounded px-3 py-2 text-sm" />
                    </div>
                </div>
                <div>
                    <label class="block text-sm">Phone</label>
                    <input id="add-phone" class="w-full border rounded px-3 py-2 text-sm" />
                </div>

                <!-- Face Capture -->
                <div class="pt-2">
                    <div class="flex items-center justify-between mb-2">
                        <label class="text-sm font-medium">Face Capture (optional but recommended)</label>
                        <span id="add-face-status" class="text-xs text-gray-500"></span>
                    </div>
                    <div class="bg-gray-50 border border-gray-200 rounded p-3">
                        <!-- Mode Switcher -->
                        <div class="flex items-center gap-2 mb-2">
                            <span class="text-xs text-gray-600">Mode:</span>
                            <button type="button" id="btn-add-usecam" class="px-2 py-1 text-xs rounded border bg-white">Camera</button>
                            <button type="button" id="btn-add-usefile" class="px-2 py-1 text-xs rounded border">JPG</button>
                        </div>
                        <!-- Camera Pane -->
                        <div id="pane-add-camera" class="">
                            <div class="relative aspect-video bg-black rounded overflow-hidden mb-2">
                                <video id="add-video" class="w-full h-full object-cover" autoplay muted playsinline></video>
                                <canvas id="add-canvas" class="hidden"></canvas>
                            </div>
                            <div class="flex items-center gap-2">
                                <button type="button" id="btn-add-startcam" class="px-3 py-1.5 text-sm bg-gray-100 border border-gray-200 rounded">Start Camera</button>
                                <button type="button" id="btn-add-capture" class="px-3 py-1.5 text-sm bg-primary text-white rounded">Capture</button>
                                <button type="button" id="btn-add-retake" class="px-3 py-1.5 text-sm bg-gray-100 border border-gray-200 rounded hidden">Retake</button>
                                <img id="add-snapshot" class="h-10 w-10 rounded hidden border border-gray-200" alt="snapshot" />
                            </div>
                        </div>
                        <!-- File Pane -->
                        <div id="pane-add-file" class="hidden">
                            <div class="flex items-center gap-3 mb-2">
                                <input type="file" id="add-file" accept="image/*" class="text-sm" />
                                <button type="button" id="btn-add-applyfile" class="px-3 py-1.5 text-xs bg-primary text-white rounded">Use This Image</button>
                            </div>
                            <div class="flex items-center gap-2">
                                <img id="add-file-preview" class="h-20 w-20 object-cover rounded border border-gray-200 hidden" alt="preview" />
                                <span class="text-xs text-gray-500">Select a JPG/PNG; then click "Use This Image" to assign to current pose.</span>
                            </div>
                        </div>
                        <!-- Pose selector and thumbnails -->
                        <div class="mt-3">
                            <div class="flex items-center gap-2 mb-2">
                                <span class="text-xs text-gray-600">Pose:</span>
                                <button type="button" class="pose-btn px-2 py-0.5 text-xs rounded border" data-pose="front">Front</button>
                                <button type="button" class="pose-btn px-2 py-0.5 text-xs rounded border" data-pose="left">Left</button>
                                <button type="button" class="pose-btn px-2 py-0.5 text-xs rounded border" data-pose="right">Right</button>
                                <span id="pose-active" class="ml-2 text-xs text-primary"></span>
                            </div>
                            <div id="pose-thumbs" class="grid grid-cols-3 gap-2">
                                <div class="border rounded p-1 text-center">
                                    <div class="text-[10px] text-gray-500">Front</div>
                                    <img id="thumb-front" class="w-full h-16 object-cover rounded hidden" />
                                    <div id="q-front" class="text-[10px] text-gray-500 mt-1"></div>
                                </div>
                                <div class="border rounded p-1 text-center">
                                    <div class="text-[10px] text-gray-500">Left</div>
                                    <img id="thumb-left" class="w-full h-16 object-cover rounded hidden" />
                                    <div id="q-left" class="text-[10px] text-gray-500 mt-1"></div>
                                </div>
                                <div class="border rounded p-1 text-center">
                                    <div class="text-[10px] text-gray-500">Right</div>
                                    <img id="thumb-right" class="w-full h-16 object-cover rounded hidden" />
                                    <div id="q-right" class="text-[10px] text-gray-500 mt-1"></div>
                                </div>
                            </div>
                            <div class="text-[10px] text-gray-500 mt-1">Tip: capture all three poses for better recognition.</div>
                        </div>
                    </div>
                </div>

                <div class="flex items-center gap-3 mt-2 text-sm">
                    <input type="checkbox" id="add-active" class="h-4 w-4" checked />
                    <label for="add-active">Active</label>
                </div>

                <div class="flex justify-end gap-2 pt-2">
                    <button type="button" id="save-add-employee" class="px-4 py-2 bg-primary text-white rounded">Register</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Scripts -->
    <!-- Load Socket.IO client from CDN -->
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
    <!-- App JS (split by features) -->
    <script src="/static/js/common.js"></script>
    <script src="/static/js/notifications.js"></script>
    <script src="/static/js/cctv.js"></script>
    <script src="/static/js/reports.js"></script>
    <script src="/static/js/settings.js"></script>
</html>